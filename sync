#! /bin/bash

_sync_dotfiles()
{
  cd $(dirname $BASH_SOURCE)
  local syncfiles="bash_profile bashrc emacs gitconfig screenrc vimrc zshrc"

  for dotfilename in $syncfiles; do
    local srcname="$(pwd)/$dotfilename"
    local dstname="$HOME/.$dotfilename"

    echo "${dstname}:"

    if [[ -h "$dstname" ]]; then
      echo -en "\tRemoving ... "
      \rm -- "${dstname}" && echo "[OK] "
    elif [[ -e "$dstname" ]]; then
      echo -en "\tMoving to ${dstname}.backup.$(date -I) ... "
      \mv -- "${dstname}" "${dstname}.backup.$(date -I)" && echo "[OK]"
    fi
    echo -en "\tSymlinking -> ${srcname} ... "
    \ln -s -- "${srcname}" "${dstname}"
    echo "[OK]"
  done

  cd - 1>/dev/null
}

_sync_dotfiles
